---
title: 深入理解 JVM（二）Java 对象的生与死——JVM垃圾收集机制
comments: true
date: 2017-07-19 20:33:39
tags:
- Java
- JVM
- Reading
---



Java 对象的创建，访问与回收，其中回收涉及垃圾收集机制，是 JVM 的核心



# Java对象的访问方式
一般来说，一个Java 的引用访问涉及到3个内存区域：JVM 栈，堆，方法区。
以最简单的本地变量引用：`Object obj = new Object()` 为例：
`Object obj` 表示一个本地引用，存储在JVM 栈的本地变量表中，表示一个reference 类型数据；
`new Object()` 作为实例对象数据存储在堆中；
堆中还记录了Object 类的类型信息（接口、方法、field、对象类型等）的地址，这些地址所执行的数据存储在方法区中；
在Java 虚拟机规范中，对于通过reference 类型引用访问具体对象的方式并未做规定，目前主流的实现方式主要有两种：

- 通过句柄访问：

![](http://img.wenchao.wang/17-5-17/53160532-file_1495013145453_7432.png "通过句柄访问对象")

通过句柄访问的实现方式中，JVM 堆中会专门有一块区域用来作为句柄池，存储相关句柄所执行的实例数据地址（包括在堆中地址和在方法区中的地址）。这种实现方法由于用句柄表示地址，因此十分稳定。

- 通过直接指针访问：

![](http://img.wenchao.wang/17-5-17/91259800-file_1495013191646_17ef9.png "通过直接指针访问对象")

通过直接指针访问的方式中，reference 中存储的就是对象在堆中的实际地址，在堆中存储的对象信息中包含了在方法区中的相应类型数据。这种方法最大的优势是速度快，在HotSpot 虚拟机中用的就 是这种方式。
<br/><br/>